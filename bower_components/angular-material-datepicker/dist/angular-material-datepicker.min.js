angular.module("amDate",[]).directive("amDatepicker",["$mdDialog",function(t){return{restrict:"E",require:"^ngModel",scope:{label:"@?",cancel:"@",save:"@",separator:"@",ngModel:"=",iclass:"@"},template:'<md-input-container class="md-icon-float block m0"><label>{{label != null ? label : "Date"}}</label><md-icon ng-click="datepick($event)" class="material-icons c-pointer {{iclass}}">&#xE878;</md-icon><input ng-model="ngModel"></md-input-container>',link:function(i,a,e){i.datepick=function(a){t.show({controller:function(){this.date=i.ngModel,this.separator=i.separator,this.cancel=i.cancel,this.save=i.save,this.days={},this.dayofweeks={},this.today=moment(),this.currentDay,this.year,this.monthNameLong,this.monthNameShort,this.month,this.dayName,this.day,this.yearModel,this.init=function(){null==i.cancel?this.cancel="Cancel":this.cancel=i.cancel,null==i.save?this.save="Save":this.save=i.save,null==i.separator?this.separator="-":this.separator=i.separator,null==i.ngModel||""==i.ngModel?this.currentDay=this.today:(this.datesplit=this.date.split(i.separator),this.datesplit[0]<10&&(this.datesplit[0]="0"+this.datesplit[0]),this.currentDay=moment(this.datesplit[2]+"-"+this.datesplit[1]+"-"+this.datesplit[0])),this.yearPick=this.currentDay.format("YYYY"),this.year=this.currentDay.format("YYYY"),this.monthNameLong=this.currentDay.format("MMMM"),this.monthNameShort=this.currentDay.format("MMM"),this.month=this.currentDay.format("M"),this.dayName=this.currentDay.format("dddd"),this.day=this.currentDay.format("D"),this.week(),this.fillDays()},this.week=function(){for(var t=moment().weekday(6),i=0;7>i;i++)this.dayofweeks[i]=t.add(1,"days").format("dd")},this.prevDay=function(){this.currentDay=this.currentDay.subtract(1,"d"),this.updateDate()},this.nextDay=function(){this.currentDay=this.currentDay.add(1,"d"),this.updateDate()},this.prevMonthMob=function(){this.currentDay=this.currentDay.subtract(1,"M"),1==this.month?this.month=12:this.month--,this.updateDate()},this.nextMonthMob=function(){this.currentDay=this.currentDay.add(1,"M"),12==this.month?this.month=1:this.month++,this.updateDate()},this.prevYear=function(){this.currentDay=this.currentDay.subtract(1,"Y"),this.updateDate()},this.nextYear=function(){this.currentDay=this.currentDay.add(1,"Y"),this.updateDate()},this.nextMonth=function(){this.currentDay=this.currentDay.add(1,"M"),12==this.month?this.month=1:this.month++,this.updateDate()},this.prevMonth=function(){this.currentDay=this.currentDay.subtract(1,"M"),1==this.month?this.month=12:this.month--,this.updateDate()},this.selectDay=function(t){var i=moment(this.yearPick+"-"+this.month+"-"+t);this.dayName=i.format("dddd"),this.monthNameShort=i.format("MMM"),this.day=i.format("D"),this.year=i.format("YYYY"),this.currentDay=moment(this.yearPick+"-"+this.month+"-"+t)},this.updateDate=function(){this.yearPick=this.currentDay.format("YYYY"),this.year=this.yearPick,this.monthNameLong=this.currentDay.format("MMMM"),this.monthNameShort=this.currentDay.format("MMM"),this.dayName=this.currentDay.format("dddd"),this.day=this.currentDay.format("D"),this.fillDays()},this.updateYear=function(t){this.currentYear=this.currentDay.year(t),this.updateDate()},this.fillDays=function(){var t=moment(this.yearPick+"-"+this.month+"-01"),i=moment(""+t.format("YYYY")+"-"+t.format("MM"),"YYYY-MM").daysInMonth(),a=t.format("e");this.days={};for(var e=0;a>e;e++)this.days[e]=0;for(var e=1;i>=e;e++)this.days[a]=e,a++},this.abort=function(){this.hide("abort")},this.confirm=function(t,i,a){var e=a+this.separator+i+this.separator+t;this.hide(e)},this.hide=function(i){t.hide(i)}},controllerAs:"pickCtrl",templateUrl:"angular-material-datepicker.tpl",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0}).then(function(t){"abort"!=t&&(i.ngModel=t)},function(){})}}}}]),angular.module("amDate").run(["$templateCache",function(t){t.put("angular-material-datepicker.tpl",'<md-dialog aria-label="Pick date" class="datepicker" ng-init="pickCtrl.init()"><div layout="row" layout-sm="column" layout-md="column" layout-lg="row"><div flex="50" flex-sm="100" class="picked"><div class="ta-center dayofweek">{{pickCtrl.dayName}}</div><div hide-sm flex class="mob">&nbsp;</div><span class="ta-center day"><i hide-md hide-lg hide-gt-lg ng-click="pickCtrl.prevDay()" class="material-icons c-pointer date-green-inverse ta-left">&#xE5CB;</i> <i ng-click="pickCtrl.test()" class="dt">{{pickCtrl.day}}</i> <i hide-md hide-lg hide-gt-lg ng-click="pickCtrl.nextDay()" class="material-icons c-pointer date-green-inverse ta-right">&#xE5CC;</i></span> <span class="ta-center month"><i hide-md hide-lg hide-gt-lg ng-click="pickCtrl.prevMonthMob()" class="material-icons c-pointer date-green-inverse ta-left">&#xE5CB;</i> <i ng-click="pickCtrl.test()" class="dt">{{pickCtrl.monthNameShort | uppercase}}</i> <i hide-md hide-lg hide-gt-lg ng-click="pickCtrl.nextMonthMob()" class="material-icons c-pointer date-green-inverse ta-right">&#xE5CC;</i></span> <span class="ta-center year"><i hide-md hide-lg hide-gt-lg ng-click="pickCtrl.prevYear()" class="material-icons c-pointer date-green-inverse ta-left">&#xE5CB;</i> <i ng-click="pickCtrl.test()" class="dt">{{pickCtrl.year}}</i> <i hide-md hide-lg hide-gt-lg ng-click="pickCtrl.nextYear()" class="material-icons c-pointer date-green-inverse ta-right">&#xE5CC;</i></span><div show-sm hide-md hide-lg hide-gt-lg layout="row" class="save-mobile" flex="auto"><button class="md-button" ng-click="pickCtrl.abort()" flex="20">{{pickCtrl.cancel}}</button> <button class="md-button" ng-click="pickCtrl.confirm(pickCtrl.year, pickCtrl.month, pickCtrl.day)" flex="20">{{pickCtrl.save}}</button></div></div><div flex="50" hide-sm flex-sm="100" class="date-pick"><div layout="row"><div class="prev-month"><i ng-click="pickCtrl.prevMonth()" class="material-icons c-pointer date-green ta-left" flex="none">&#xE5CB;</i></div><div class="month-pick" layout="row" flex><span flex="auto">{{pickCtrl.monthNameLong}} <input type="number" class="year-pick" ng-model="inputYear" ng-change="pickCtrl.updateYear(inputYear)" value="{{pickCtrl.yearPick}}"></span></div><div class="next-month"><i ng-click="pickCtrl.nextMonth()" class="material-icons c-pointer date-green ta-right" flex="none">&#xE5CC;</i></div></div><div layout="column"><div class="day-pick"><div class="weeks c-default" flex><span ng-repeat="dn in pickCtrl.dayofweeks"><md-button md-no-ink class="week-btn c-default">{{dn}}</md-button></span></div><span ng-repeat="d in pickCtrl.days"><md-button ng-click="pickCtrl.selectDay(d)" class="day-btn ng-class:{disabled: !d, active: d == pickCtrl.day}">{{d}}</md-button></span></div><div class="md-buttons ta-right" flex="20"><button class="date-green md-button abort" ng-click="pickCtrl.abort()">{{pickCtrl.cancel}}</button> <button class="date-green md-button confirm" ng-click="pickCtrl.confirm(pickCtrl.year, pickCtrl.month, pickCtrl.day)">{{pickCtrl.save}}</button></div></div></div></div></md-dialog>')}]);